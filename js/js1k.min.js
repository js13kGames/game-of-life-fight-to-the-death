var e=100,h=0.4,k,q,r,s,t=["#5E6D70","#FF6600","#1B1D1E"],u=!1;function x(){var g=0,f=1,d;k=Math.ceil(a.width/e);q=Math.ceil(a.height/k);r=[];for(s=[];g<e;g++)for(r[g]=[],s[g]=[],g>e/2-1&&(f=2),d=0;d<q;d++){r[g][d]=Math.random()>h?0:f;s[g][d]=0;var l=g*k,m=d*k;c.fillStyle=t[r[g][d]];c.fillRect(l,m,k,k)}}b.onkeyup=function(g){switch(g.keyCode){case 32:y();break;case 39:u||(e+=6,x());break;case 37:u||(e-=6,x());break;case 38:u||(h+=0.02,x());break;case 40:u||(h-=0.02,x())}};x();
function y(){function g(){for(var f=0,d;f<e;f++)for(d=0;d<q;d++){for(var l=0>f-1?e-1:f-1,m=f+1>e-1?0:f+1,n=0>d-1?q-1:d-1,p=d+1>q-1?0:d+1,l=[r[l][n],r[l][d],r[l][p],r[f][n],r[f][p],r[m][n],r[m][d],r[m][p]],v=p=n=m=0,w=void 0;8>v;v++)l[v]?1===l[v]?n++:p++:m++;w=n+p;s[f][d]=r[f][d]?2>w||3<w?0:r[f][d]:3!==w?0:p>n?2:n>p?1:Math.floor(Math.random()+0.5);l=f*k;m=d*k;c.fillStyle=t[s[f][d]];c.fillRect(l,m,k,k)}s=[r,r=s][0];u&&requestAnimationFrame(g)}(u=!u)&&requestAnimationFrame(g)};